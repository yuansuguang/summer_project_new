{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/**\n * Extend a sub class from base class\n * @param {object|Function} makeDefaultOpt default option of this sub class, method of the sub can use this.xxx to access this option\n * @param {Function} [initialize] Initialize after the sub class is instantiated\n * @param {Object} [proto] Prototype methods/properties of the sub class\n * @memberOf clay.core.mixin.extend\n * @return {Function}\n */\nfunction derive(makeDefaultOpt, initialize /*optional*/, proto /*optional*/) {\n  if (typeof initialize == 'object') {\n    proto = initialize;\n    initialize = null;\n  }\n  var _super = this;\n  var propList;\n  if (!(makeDefaultOpt instanceof Function)) {\n    // Optimize the property iterate if it have been fixed\n    propList = [];\n    for (var propName in makeDefaultOpt) {\n      if (makeDefaultOpt.hasOwnProperty(propName)) {\n        propList.push(propName);\n      }\n    }\n  }\n  var sub = function (options) {\n    // call super constructor\n    _super.apply(this, arguments);\n    if (makeDefaultOpt instanceof Function) {\n      // Invoke makeDefaultOpt each time if it is a function, So we can make sure each\n      // property in the object will not be shared by mutiple instances\n      extend(this, makeDefaultOpt.call(this, options));\n    } else {\n      extendWithPropList(this, makeDefaultOpt, propList);\n    }\n    if (this.constructor === sub) {\n      // Initialize function will be called in the order of inherit\n      var initializers = sub.__initializers__;\n      for (var i = 0; i < initializers.length; i++) {\n        initializers[i].apply(this, arguments);\n      }\n    }\n  };\n  // save super constructor\n  sub.__super__ = _super;\n  // Initialize function will be called after all the super constructor is called\n  if (!_super.__initializers__) {\n    sub.__initializers__ = [];\n  } else {\n    sub.__initializers__ = _super.__initializers__.slice();\n  }\n  if (initialize) {\n    sub.__initializers__.push(initialize);\n  }\n  var Ctor = function () {};\n  Ctor.prototype = _super.prototype;\n  sub.prototype = new Ctor();\n  sub.prototype.constructor = sub;\n  extend(sub.prototype, proto);\n\n  // extend the derive method as a static method;\n  sub.extend = _super.extend;\n\n  // DEPCRATED\n  sub.derive = _super.extend;\n  return sub;\n}\nfunction extend(target, source) {\n  if (!source) {\n    return;\n  }\n  for (var name in source) {\n    if (source.hasOwnProperty(name)) {\n      target[name] = source[name];\n    }\n  }\n}\nfunction extendWithPropList(target, source, propList) {\n  for (var i = 0; i < propList.length; i++) {\n    var propName = propList[i];\n    target[propName] = source[propName];\n  }\n}\n\n/**\n * @alias clay.core.mixin.extend\n * @mixin\n */\nexport default {\n  extend: derive,\n  // DEPCRATED\n  derive: derive\n};","map":{"version":3,"names":["derive","makeDefaultOpt","initialize","proto","_super","propList","Function","propName","hasOwnProperty","push","sub","options","apply","arguments","extend","call","extendWithPropList","constructor","initializers","__initializers__","i","length","__super__","slice","Ctor","prototype","target","source","name"],"sources":["E:/mytest/node_modules/claygl/src/core/mixin/extend.js"],"sourcesContent":["/**\n * Extend a sub class from base class\n * @param {object|Function} makeDefaultOpt default option of this sub class, method of the sub can use this.xxx to access this option\n * @param {Function} [initialize] Initialize after the sub class is instantiated\n * @param {Object} [proto] Prototype methods/properties of the sub class\n * @memberOf clay.core.mixin.extend\n * @return {Function}\n */\nfunction derive(makeDefaultOpt, initialize/*optional*/, proto/*optional*/) {\n\n    if (typeof initialize == 'object') {\n        proto = initialize;\n        initialize = null;\n    }\n\n    var _super = this;\n\n    var propList;\n    if (!(makeDefaultOpt instanceof Function)) {\n        // Optimize the property iterate if it have been fixed\n        propList = [];\n        for (var propName in makeDefaultOpt) {\n            if (makeDefaultOpt.hasOwnProperty(propName)) {\n                propList.push(propName);\n            }\n        }\n    }\n\n    var sub = function(options) {\n\n        // call super constructor\n        _super.apply(this, arguments);\n\n        if (makeDefaultOpt instanceof Function) {\n            // Invoke makeDefaultOpt each time if it is a function, So we can make sure each\n            // property in the object will not be shared by mutiple instances\n            extend(this, makeDefaultOpt.call(this, options));\n        }\n        else {\n            extendWithPropList(this, makeDefaultOpt, propList);\n        }\n\n        if (this.constructor === sub) {\n            // Initialize function will be called in the order of inherit\n            var initializers = sub.__initializers__;\n            for (var i = 0; i < initializers.length; i++) {\n                initializers[i].apply(this, arguments);\n            }\n        }\n    };\n    // save super constructor\n    sub.__super__ = _super;\n    // Initialize function will be called after all the super constructor is called\n    if (!_super.__initializers__) {\n        sub.__initializers__ = [];\n    } else {\n        sub.__initializers__ = _super.__initializers__.slice();\n    }\n    if (initialize) {\n        sub.__initializers__.push(initialize);\n    }\n\n    var Ctor = function() {};\n    Ctor.prototype = _super.prototype;\n    sub.prototype = new Ctor();\n    sub.prototype.constructor = sub;\n    extend(sub.prototype, proto);\n\n    // extend the derive method as a static method;\n    sub.extend = _super.extend;\n\n    // DEPCRATED\n    sub.derive = _super.extend;\n\n    return sub;\n}\n\nfunction extend(target, source) {\n    if (!source) {\n        return;\n    }\n    for (var name in source) {\n        if (source.hasOwnProperty(name)) {\n            target[name] = source[name];\n        }\n    }\n}\n\nfunction extendWithPropList(target, source, propList) {\n    for (var i = 0; i < propList.length; i++) {\n        var propName = propList[i];\n        target[propName] = source[propName];\n    }\n}\n\n/**\n * @alias clay.core.mixin.extend\n * @mixin\n */\nexport default {\n\n    extend: derive,\n\n    // DEPCRATED\n    derive: derive\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}