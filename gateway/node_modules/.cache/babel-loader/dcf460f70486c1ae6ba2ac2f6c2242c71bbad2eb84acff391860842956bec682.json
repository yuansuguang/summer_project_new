{"ast":null,"code":"import * as echarts from 'echarts/lib/echarts';\nimport graphicGL from '../../util/graphicGL';\nimport retrieve from '../../util/retrieve';\nimport format from '../../util/format';\nimport PointsBuilder from '../common/PointsBuilder';\nexport default echarts.ChartView.extend({\n  type: 'scatter3D',\n  hasSymbolVisual: true,\n  __ecgl__: true,\n  init: function (ecModel, api) {\n    this.groupGL = new graphicGL.Node();\n    this._pointsBuilderList = [];\n    this._currentStep = 0;\n  },\n  render: function (seriesModel, ecModel, api) {\n    this.groupGL.removeAll();\n    if (!seriesModel.getData().count()) {\n      return;\n    }\n    var coordSys = seriesModel.coordinateSystem;\n    if (coordSys && coordSys.viewGL) {\n      coordSys.viewGL.add(this.groupGL);\n      this._camera = coordSys.viewGL.camera;\n      var pointsBuilder = this._pointsBuilderList[0];\n      if (!pointsBuilder) {\n        pointsBuilder = this._pointsBuilderList[0] = new PointsBuilder(false, api);\n      }\n      this._pointsBuilderList.length = 1;\n      this.groupGL.add(pointsBuilder.rootNode);\n      pointsBuilder.update(seriesModel, ecModel, api);\n      pointsBuilder.updateView(coordSys.viewGL.camera);\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        throw new Error('Invalid coordinate system');\n      }\n    }\n  },\n  incrementalPrepareRender: function (seriesModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    if (coordSys && coordSys.viewGL) {\n      coordSys.viewGL.add(this.groupGL);\n      this._camera = coordSys.viewGL.camera;\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        throw new Error('Invalid coordinate system');\n      }\n    }\n    this.groupGL.removeAll();\n    this._currentStep = 0;\n  },\n  incrementalRender: function (params, seriesModel, ecModel, api) {\n    // TODO Sort transparency.\n    if (params.end <= params.start) {\n      return;\n    }\n    var pointsBuilder = this._pointsBuilderList[this._currentStep];\n    if (!pointsBuilder) {\n      pointsBuilder = new PointsBuilder(false, api);\n      this._pointsBuilderList[this._currentStep] = pointsBuilder;\n    }\n    this.groupGL.add(pointsBuilder.rootNode);\n    pointsBuilder.update(seriesModel, ecModel, api, params.start, params.end);\n    pointsBuilder.updateView(seriesModel.coordinateSystem.viewGL.camera);\n    this._currentStep++;\n  },\n  updateCamera: function () {\n    this._pointsBuilderList.forEach(function (pointsBuilder) {\n      pointsBuilder.updateView(this._camera);\n    }, this);\n  },\n  highlight: function (seriesModel, ecModel, api, payload) {\n    this._toggleStatus('highlight', seriesModel, ecModel, api, payload);\n  },\n  downplay: function (seriesModel, ecModel, api, payload) {\n    this._toggleStatus('downplay', seriesModel, ecModel, api, payload);\n  },\n  _toggleStatus: function (status, seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var dataIndex = retrieve.queryDataIndex(data, payload);\n    var isHighlight = status === 'highlight';\n    if (dataIndex != null) {\n      echarts.util.each(format.normalizeToArray(dataIndex), function (dataIdx) {\n        for (var i = 0; i < this._pointsBuilderList.length; i++) {\n          var pointsBuilder = this._pointsBuilderList[i];\n          isHighlight ? pointsBuilder.highlight(data, dataIdx) : pointsBuilder.downplay(data, dataIdx);\n        }\n      }, this);\n    } else {\n      // PENDING, OPTIMIZE\n      data.each(function (dataIdx) {\n        for (var i = 0; i < this._pointsBuilderList.length; i++) {\n          var pointsBuilder = this._pointsBuilderList[i];\n          isHighlight ? pointsBuilder.highlight(data, dataIdx) : pointsBuilder.downplay(data, dataIdx);\n        }\n      });\n    }\n  },\n  dispose: function () {\n    this._pointsBuilderList.forEach(function (pointsBuilder) {\n      pointsBuilder.dispose();\n    });\n    this.groupGL.removeAll();\n  },\n  remove: function () {\n    this.groupGL.removeAll();\n  }\n});","map":{"version":3,"names":["echarts","graphicGL","retrieve","format","PointsBuilder","ChartView","extend","type","hasSymbolVisual","__ecgl__","init","ecModel","api","groupGL","Node","_pointsBuilderList","_currentStep","render","seriesModel","removeAll","getData","count","coordSys","coordinateSystem","viewGL","add","_camera","camera","pointsBuilder","length","rootNode","update","updateView","process","env","NODE_ENV","Error","incrementalPrepareRender","incrementalRender","params","end","start","updateCamera","forEach","highlight","payload","_toggleStatus","downplay","status","data","dataIndex","queryDataIndex","isHighlight","util","each","normalizeToArray","dataIdx","i","dispose","remove"],"sources":["E:/QuestionairePlanet_Fronted/mytest/node_modules/echarts-gl/lib/chart/scatter3D/Scatter3DView.js"],"sourcesContent":["import * as echarts from 'echarts/lib/echarts';\nimport graphicGL from '../../util/graphicGL';\nimport retrieve from '../../util/retrieve';\nimport format from '../../util/format';\nimport PointsBuilder from '../common/PointsBuilder';\nexport default echarts.ChartView.extend({\n  type: 'scatter3D',\n  hasSymbolVisual: true,\n  __ecgl__: true,\n  init: function (ecModel, api) {\n    this.groupGL = new graphicGL.Node();\n    this._pointsBuilderList = [];\n    this._currentStep = 0;\n  },\n  render: function (seriesModel, ecModel, api) {\n    this.groupGL.removeAll();\n\n    if (!seriesModel.getData().count()) {\n      return;\n    }\n\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys && coordSys.viewGL) {\n      coordSys.viewGL.add(this.groupGL);\n      this._camera = coordSys.viewGL.camera;\n      var pointsBuilder = this._pointsBuilderList[0];\n\n      if (!pointsBuilder) {\n        pointsBuilder = this._pointsBuilderList[0] = new PointsBuilder(false, api);\n      }\n\n      this._pointsBuilderList.length = 1;\n      this.groupGL.add(pointsBuilder.rootNode);\n      pointsBuilder.update(seriesModel, ecModel, api);\n      pointsBuilder.updateView(coordSys.viewGL.camera);\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        throw new Error('Invalid coordinate system');\n      }\n    }\n  },\n  incrementalPrepareRender: function (seriesModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys && coordSys.viewGL) {\n      coordSys.viewGL.add(this.groupGL);\n      this._camera = coordSys.viewGL.camera;\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        throw new Error('Invalid coordinate system');\n      }\n    }\n\n    this.groupGL.removeAll();\n    this._currentStep = 0;\n  },\n  incrementalRender: function (params, seriesModel, ecModel, api) {\n    // TODO Sort transparency.\n    if (params.end <= params.start) {\n      return;\n    }\n\n    var pointsBuilder = this._pointsBuilderList[this._currentStep];\n\n    if (!pointsBuilder) {\n      pointsBuilder = new PointsBuilder(false, api);\n      this._pointsBuilderList[this._currentStep] = pointsBuilder;\n    }\n\n    this.groupGL.add(pointsBuilder.rootNode);\n    pointsBuilder.update(seriesModel, ecModel, api, params.start, params.end);\n    pointsBuilder.updateView(seriesModel.coordinateSystem.viewGL.camera);\n    this._currentStep++;\n  },\n  updateCamera: function () {\n    this._pointsBuilderList.forEach(function (pointsBuilder) {\n      pointsBuilder.updateView(this._camera);\n    }, this);\n  },\n  highlight: function (seriesModel, ecModel, api, payload) {\n    this._toggleStatus('highlight', seriesModel, ecModel, api, payload);\n  },\n  downplay: function (seriesModel, ecModel, api, payload) {\n    this._toggleStatus('downplay', seriesModel, ecModel, api, payload);\n  },\n  _toggleStatus: function (status, seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var dataIndex = retrieve.queryDataIndex(data, payload);\n    var isHighlight = status === 'highlight';\n\n    if (dataIndex != null) {\n      echarts.util.each(format.normalizeToArray(dataIndex), function (dataIdx) {\n        for (var i = 0; i < this._pointsBuilderList.length; i++) {\n          var pointsBuilder = this._pointsBuilderList[i];\n          isHighlight ? pointsBuilder.highlight(data, dataIdx) : pointsBuilder.downplay(data, dataIdx);\n        }\n      }, this);\n    } else {\n      // PENDING, OPTIMIZE\n      data.each(function (dataIdx) {\n        for (var i = 0; i < this._pointsBuilderList.length; i++) {\n          var pointsBuilder = this._pointsBuilderList[i];\n          isHighlight ? pointsBuilder.highlight(data, dataIdx) : pointsBuilder.downplay(data, dataIdx);\n        }\n      });\n    }\n  },\n  dispose: function () {\n    this._pointsBuilderList.forEach(function (pointsBuilder) {\n      pointsBuilder.dispose();\n    });\n\n    this.groupGL.removeAll();\n  },\n  remove: function () {\n    this.groupGL.removeAll();\n  }\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}