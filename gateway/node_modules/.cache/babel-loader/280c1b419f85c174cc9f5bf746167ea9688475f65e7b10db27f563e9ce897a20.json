{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport FinishTest from \"@/views/qn-fillpane/FinishTest.vue\";\nimport getDataApi from \"@/utils/getDataApi\";\nimport saveAnsApi from \"@/utils/saveDataApi\";\nimport toolApi from \"@/utils/toolApi\";\nimport DeadTime from \"@/views/qn-fillpane/components/DeadTime\";\nexport default {\n  name: \"FillQn\",\n  mixins: [getDataApi, saveAnsApi, toolApi],\n  components: {\n    FinishTest,\n    DeadTime\n  },\n  data() {\n    return {\n      // rootUrl: this.GLOBAL.baseUrl,\n\n      success: false,\n      close: false,\n      repeat: false,\n      qn_id: '',\n      mode: this.$route.query.mode,\n      open: 1,\n      title: '考试问卷Beta',\n      description: '测试考试问卷的预览模式',\n      questions: [\n        // {\n        //   id: 1,\n        //   type: 'name',\n        //   title: '姓名',\n        //   must: true, // 是否必填\n        //   description: '', // 问题描述\n        //   options: [\n        //     {\n        //       title: '', // 选项标题\n        //       id: 0 // 选项id\n        //     },\n        //   ],\n        //   row: 1, // 填空区域行数\n        //   refer: '', // 参考答案\n        //   point: 0,  // 分值\n        // },\n        // {\n        //   id: 2,\n        //   type: 'stuId',\n        //   title: '学号',\n        //   must: true, // 是否必填\n        //   description: '', // 问题描述\n        //   options: [\n        //     {\n        //       title: '', // 选项标题\n        //       id: 0 // 选项id\n        //     },\n        //   ],\n        //   row: 1, // 填空区域行数\n        //   refer: '', // 参考答案\n        //   point: 0,  // 分值\n        // },\n        // {\n        //   id: 3,\n        //   type: 'class',\n        //   title: '班级',\n        //   must: true, // 是否必填\n        //   description: '', // 问题描述\n        //   options: [\n        //     {\n        //       title: '', // 选项标题\n        //       id: 0 // 选项id\n        //     },\n        //   ],\n        //   row: 1, // 填空区域行数\n        //   refer: '', // 参考答案\n        //   point: 0,  // 分值\n        // },\n        // {\n        //   id: 4,\n        //   type: 'school',\n        //   title: '学校',\n        //   must: true, // 是否必填\n        //   description: '', // 问题描述\n        //   options: [\n        //     {\n        //       title: '', // 选项标题\n        //       id: 0 // 选项id\n        //     },\n        //   ],\n        //   row: 1, // 填空区域行数\n        //   refer: '', // 参考答案\n        //   point: 0,  // 分值\n        // },\n        // {\n        //   id: 5,\n        //   type: 'radio',\n        //   title: '这是一个什么问卷？',\n        //   must: true, // 是否必填\n        //   description: '请谨慎做答', // 问题描述\n        //   options: [\n        //     {\n        //       title: '考试问卷', // 选项标题\n        //       id: 1 // 选项id\n        //     },\n        //     {\n        //       title: '调查问卷', // 选项标题\n        //       id: 2 // 选项id\n        //     },\n        //   ],\n        //   row: 0, // 填空区域行数\n        //   refer: '考试问卷', // 参考答案\n        //   point: 10,  // 分值\n        // },\n        // {\n        //   id: 6,\n        //   type: 'checkbox',\n        //   title: '软工助教都有谁？',\n        //   must: false, // 是否必填\n        //   description: '', // 问题描述\n        //   options: [\n        //     {\n        //       title: 'ZYH', // 选项标题\n        //       id: 1 // 选项id\n        //     },\n        //     {\n        //       title: 'LKW', // 选项标题\n        //       id: 2 // 选项id\n        //     },\n        //     {\n        //       title: 'MHY', // 选项标题\n        //       id: 3 // 选项id\n        //     },\n        //     {\n        //       title: 'HZH', // 选项标题\n        //       id: 4 // 选项id\n        //     },\n        //   ],\n        //   row: 0, // 填空区域行数\n        //   refer: '[\"LKW\", \"MHY\"]', // 参考答案\n        //   point: 10,  // 分值\n        // },\n        // {\n        //   id: 7,\n        //   type: 'text',\n        //   title: '小学期累不累？',\n        //   must: false, // 是否必填\n        //   description: '请谨慎考虑做答', // 问题描述\n        //   options: [\n        //     {\n        //       title: '', // 选项标题\n        //       id: 0 // 选项id\n        //     },\n        //   ],\n        //   row: 5, // 填空区域行数\n        //   refer: '', // 参考答案\n        //   point: 30,  // 分值\n        // },\n        // {\n        //   id: 8,\n        //   type: 'judge',\n        //   title: '从来没有加过班',\n        //   must: true, // 是否必填\n        //   description: '请谨慎考虑做答', // 问题描述\n        //   options: [\n        //     {\n        //       title: '对', // 选项标题\n        //       id: 1 // 选项id\n        //     },\n        //     {\n        //       title: '错', // 选项标题\n        //       id: 2 // 选项id\n        //     },\n        //   ],\n        //   row: 0, // 填空区域行数\n        //   refer: '对', // 参考答案\n        //   point: 50,  // 分值\n        // },\n      ],\n      answers: [\n        // {\n        //   question_id: '1',\n        //   type: 'name',\n        //   ans: null,\n        //   ansList: [],\n        //   answer: ''\n        // },\n        // {\n        //   question_id: '2',\n        //   type: 'stuId',\n        //   ans: null,\n        //   ansList: [],\n        //   answer: ''\n        // },\n        // {\n        //   question_id: '3',\n        //   type: 'class',\n        //   ans: null,\n        //   ansList: [],\n        //   answer: ''\n        // },\n        // {\n        //   question_id: '4',\n        //   type: 'school',\n        //   ans: null,\n        //   ansList: [],\n        //   answer: ''\n        // },\n        // {\n        //   question_id: '5',\n        //   type: 'radio',\n        //   ans: null,\n        //   ansList: [],\n        //   answer: ''\n        // },\n        // {\n        //   question_id: '6',\n        //   type: 'checkbox',\n        //   ans: null,\n        //   ansList: [],\n        //   answer: ''\n        // },\n        // {\n        //   question_id: '7',\n        //   type: 'text',\n        //   ans: null,\n        //   ansList: [],\n        //   answer: ''\n        // },\n        // {\n        //   question_id: '8',\n        //   type: 'judge',\n        //   ans: null,\n        //   ansList: [],\n        //   answer: ''\n        // },\n      ],\n      quesStorage: [],\n      type: '',\n      finished_time: ''\n    };\n  },\n  methods: {\n    ahead(qid) {\n      if (qid === 0) return true;\n      for (let i = 0; i < this.questions.length; i++) {\n        if (this.questions[i].id === qid) {\n          if (this.questions[i].is_shown === true) return this.ahead(this.questions[i].last_question);else return false;\n        }\n      }\n      return false;\n    },\n    changeHandler(id, value) {\n      console.log(id + '改变之后的值是:' + value);\n      let pid = 0;\n      for (let j = 0; j < this.questions[id - 1].options.length; j++) {\n        if (value === this.questions[id - 1].options[j].title) pid = this.questions[id - 1].options[j].id;\n      }\n      for (let i = id; i < this.questions.length; i++) {\n        if (this.questions[i].last_question === id && this.questions[i].last_option === pid) {\n          this.questions[i].is_shown = true;\n        } else if (this.questions[i].last_question === id) {\n          this.questions[i].is_shown = false;\n        }\n      }\n    },\n    changeHandler2(id, value) {\n      console.log(id + '改变之后的值是:' + value);\n      let pid = [];\n      let a = 0;\n      let find = false;\n      for (let j = 0; j < this.questions[id - 1].options.length; j++) {\n        for (let k = 0; k < value.length; k++) {\n          if (value[k] === this.questions[id - 1].options[j].title) {\n            pid[a++] = this.questions[id - 1].options[j].id;\n            break;\n          }\n        }\n      }\n      for (let i = id; i < this.questions.length; i++) {\n        if (this.questions[i].last_question === id) {\n          for (let k = 0; k < pid.length; k++) {\n            if (this.questions[i].last_option === pid[k]) {\n              this.questions[i].is_shown = true;\n              find = true;\n              break;\n            }\n          }\n          if (!find) this.questions[i].is_shown = false;\n        }\n      }\n    },\n    gotoHome() {\n      this.$router.push('/');\n    },\n    backToSurvey() {\n      this.success = false;\n      this.repeat = false;\n      this.close = false;\n      location.reload();\n    },\n    submit: function () {\n      this.submitAns('2');\n    },\n    quit: function () {\n      this.$confirm('请选择返回问卷编辑页面或问卷中心？', '确认信息', {\n        distinguishCancelAndClose: true,\n        confirmButtonText: '编辑页面',\n        cancelButtonText: '问卷中心'\n      }).then(() => {\n        location.href = this.GLOBAL.baseUrl + \"/edit_test?pid=\" + this.$route.query.pid;\n      }).catch(action => {\n        if (action === 'cancel') {\n          this.$router.push('/index');\n        }\n      });\n    }\n  },\n  created() {\n    if (this.mode === '0') {\n      this.getQnDataForPreview();\n    } else if (this.mode === '1') {\n      this.getQnDataForFill(false, true, true);\n    }\n  }\n};","map":{"version":3,"names":["FinishTest","getDataApi","saveAnsApi","toolApi","DeadTime","name","mixins","components","data","success","close","repeat","qn_id","mode","$route","query","open","title","description","questions","answers","quesStorage","type","finished_time","methods","ahead","qid","i","length","id","is_shown","last_question","changeHandler","value","console","log","pid","j","options","last_option","changeHandler2","a","find","k","gotoHome","$router","push","backToSurvey","location","reload","submit","submitAns","quit","$confirm","distinguishCancelAndClose","confirmButtonText","cancelButtonText","then","href","GLOBAL","baseUrl","catch","action","created","getQnDataForPreview","getQnDataForFill"],"sources":["E:\\mytest\\src\\views\\qn-fillpane\\fillQnmytest.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <FinishTest v-if=\"success || repeat\" :quesStorage=\"questions\"></FinishTest>\r\n      <div class=\"qn-fill\" v-else>\r\n        <div class=\"back-bt\" v-if=\"mode==='0' || mode===0\">\r\n          <el-button icon=\"el-icon-arrow-left\" type=\"danger\" @click=\"quit\">退出预览</el-button>\r\n        </div>\r\n        <div class=\"paper\">\r\n          <div v-if=\"close\" style=\"padding-bottom: 50px\">\r\n            <div class=\"tyn-icon\">\r\n              <img src=\"../../assets/images/survey2.png\" alt=\"\">\r\n            </div>\r\n            <h1 v-if=\"close\">问卷已结束，感谢您的参与！</h1>\r\n            <el-button type=\"primary\" size=\"middle\" @click=\"gotoHome\">返回</el-button>\r\n          </div>\r\n  <!--        <div v-if=\"repeat\" style=\"padding-bottom: 50px\">-->\r\n  <!--          <div class=\"tyn-icon\">-->\r\n  <!--            <img src=\"../../assets/images/survey2.png\" alt=\"\">-->\r\n  <!--          </div>-->\r\n  <!--          <h1 v-if=\"repeat\">您已填写过此问卷！</h1>-->\r\n  <!--          <el-button type=\"primary\" size=\"middle\" @click=\"gotoHome\">返回</el-button>-->\r\n  <!--        </div>-->\r\n          <div class=\"body\" v-else>\r\n  \r\n            <DeadTime v-if=\"finished_time!==''&&finished_time!==undefined\" :endTime=\"finished_time\"></DeadTime>\r\n  \r\n            <div class=\"title\">\r\n              {{ title }}\r\n            </div>\r\n  \r\n            <div class=\"description\" v-if=\"this.description!==''\">\r\n              &emsp;&emsp;{{ description }}\r\n            </div>\r\n  \r\n            <el-divider></el-divider>\r\n  \r\n            <div class=\"main\">\r\n              <div class=\"ques-block\" v-for=\"item in questions\" :key=\"item.id\">\r\n                <div v-if=\"item.is_shown&&ahead(item.last_question)\">\r\n                <div class=\"q-title\">\r\n                  {{ item.id }}. {{ item.title }}\r\n                  <span class=\"must\" v-if=\"item.must\">(必填)</span>\r\n                  <span\r\n                      class=\"point\"\r\n                      v-if=\"item.type!=='name'\r\n                     && item.type!=='stuId'\r\n                     && item.type!=='class'\r\n                     && item.type!=='school'\"\r\n                  >\r\n                  &ensp;[分值 : {{ item.point }}]\r\n                </span>\r\n                </div>\r\n  \r\n                <div\r\n                    class=\"q-description\"\r\n                    v-if=\"item.description!=='' && item.description!==null && item.description!==undefined\"\r\n                >\r\n                  {{ item.description }}\r\n                </div>\r\n  \r\n                  <!--                  图片-->\r\n                  <el-row class=\"block-img\" v-for=\"(i,index) in item.imgList\" :key=\"i.index\">\r\n                    <el-col :offset=\"4\" :span=\"8\" class=\"demo-image__preview\" v-if=\"index%2===0\">\r\n                      <el-image\r\n                          style=\"width: 200px; height: 200px\"\r\n                          :src=\"i.url\"\r\n                          :preview-src-list=\"[i.url]\">\r\n                      </el-image>\r\n                    </el-col>\r\n                    <el-col :span=\"8\" class=\"demo-image__preview\" v-if=\"index%2===0&&index+1<=item.imgList.length-1\">\r\n                      <el-image\r\n                          style=\"width: 200px; height: 200px\"\r\n                          :src=\"item.imgList[index+1].url\"\r\n                          :preview-src-list=\"[item.imgList[index+1].url]\">\r\n                      </el-image>\r\n                    </el-col>\r\n                  </el-row>\r\n                  <span style=\"color: #9b9ea0;font-size: x-small;margin: 5px\" v-if=\"item.imgList.length!==0\">（点击图片查看大图）</span>\r\n  \r\n  \r\n                  <!--                视频-->\r\n                  <el-row class=\"block-img\" v-for=\"i in item.videoList\" :key=\"i.index\">\r\n                    <embed width=400 height=230 transparentatstart=true\r\n                           animationatstart=false autostart=true autosize=false volume=100\r\n                           displaysize=0 showdisplay=true showstatusbar=true showcontrols=true\r\n                           showaudiocontrols=true showtracker=true showpositioncontrols=true\r\n                           balance=true :src=\"i.url\">\r\n                  </el-row>\r\n  \r\n                <!--     姓名/学号/班级/学校-->\r\n                <div class=\"q-opt\"\r\n                     v-if=\"item.type === 'name'\r\n                     || item.type === 'stuId'\r\n                     || item.type === 'class'\r\n                     || item.type === 'school'\">\r\n                  <el-input\r\n                      placeholder=\"请输入内容\"\r\n                      v-model=\"answers[item.id-1].ans\">\r\n                  </el-input>\r\n                </div>\r\n  \r\n                <!--              判断/单选-->\r\n                <div v-if=\"item.type==='radio' || item.type === 'judge'\">\r\n                  <div class=\"q-opt\" v-for=\"opt in item.options\" :key=\"opt.id\">\r\n                    <el-radio v-if=\"item.type==='radio'\" @change=\"changeHandler(item.id,answers[item.id-1].ans)\" v-model=\"answers[item.id-1].ans\" :label=\"opt.title\">\r\n                    {{ opt.title }}\r\n                  </el-radio>\r\n                  </div>\r\n                </div>\r\n  \r\n                <!--                  多选-->\r\n                <el-checkbox-group class=\"q-opt\" v-if=\"item.type==='checkbox'\" @change=\"changeHandler2(item.id,answers[item.id-1].ansList)\" v-model=\"answers[item.id-1].ansList\">\r\n                  <el-checkbox v-for=\"opt in item.options\" :key=\"opt.id\" :label=\"opt.title\">\r\n                    {{ opt.title }}\r\n                  </el-checkbox>\r\n                </el-checkbox-group>\r\n  \r\n                <!--                  填空-->\r\n                <div class=\"q-opt\" v-if=\"item.type==='text'\">\r\n                  <el-input\r\n                      v-if=\"item.row>1\"\r\n                      type=\"textarea\"\r\n                      :autosize=\"{ minRows: 2, maxRows: item.row}\"\r\n                      placeholder=\"请输入内容\"\r\n                      v-model=\"answers[item.id-1].ans\">\r\n                  </el-input>\r\n                  <el-input\r\n                      v-if=\"item.row===1\"\r\n                      placeholder=\"请输入内容\"\r\n                      v-model=\"answers[item.id-1].ans\">\r\n                  </el-input>\r\n                </div>\r\n  \r\n              </div>\r\n            </div>\r\n            </div>\r\n            <div class=\"submit-bt\">\r\n              <el-button type=\"primary\" @click=\"submit\">提交</el-button>\r\n            </div>\r\n  \r\n          </div>\r\n  \r\n          <div class=\"tail\">\r\n            <a :href=\"rootUrl\">问卷星球</a>&ensp;提供技术支持\r\n          </div>\r\n          </div>\r\n  \r\n  \r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import FinishTest from \"@/views/qn-fillpane/FinishTest.vue\";\r\n  import getDataApi from \"@/utils/getDataApi\";\r\n  import saveAnsApi from \"@/utils/saveDataApi\";\r\n  import toolApi from \"@/utils/toolApi\";\r\n  import DeadTime from \"@/views/qn-fillpane/components/DeadTime\";\r\n  export default {\r\n    name: \"FillQn\",\r\n    mixins: [getDataApi, saveAnsApi, toolApi],\r\n    components: {FinishTest, DeadTime},\r\n    data() {\r\n      return {\r\n        // rootUrl: this.GLOBAL.baseUrl,\r\n  \r\n        success: false,\r\n        close: false,\r\n        repeat: false,\r\n  \r\n        qn_id: '',\r\n        mode: this.$route.query.mode,\r\n        open: 1,\r\n        title: '考试问卷Beta',\r\n        description: '测试考试问卷的预览模式',\r\n        questions: [\r\n          // {\r\n          //   id: 1,\r\n          //   type: 'name',\r\n          //   title: '姓名',\r\n          //   must: true, // 是否必填\r\n          //   description: '', // 问题描述\r\n          //   options: [\r\n          //     {\r\n          //       title: '', // 选项标题\r\n          //       id: 0 // 选项id\r\n          //     },\r\n          //   ],\r\n          //   row: 1, // 填空区域行数\r\n          //   refer: '', // 参考答案\r\n          //   point: 0,  // 分值\r\n          // },\r\n          // {\r\n          //   id: 2,\r\n          //   type: 'stuId',\r\n          //   title: '学号',\r\n          //   must: true, // 是否必填\r\n          //   description: '', // 问题描述\r\n          //   options: [\r\n          //     {\r\n          //       title: '', // 选项标题\r\n          //       id: 0 // 选项id\r\n          //     },\r\n          //   ],\r\n          //   row: 1, // 填空区域行数\r\n          //   refer: '', // 参考答案\r\n          //   point: 0,  // 分值\r\n          // },\r\n          // {\r\n          //   id: 3,\r\n          //   type: 'class',\r\n          //   title: '班级',\r\n          //   must: true, // 是否必填\r\n          //   description: '', // 问题描述\r\n          //   options: [\r\n          //     {\r\n          //       title: '', // 选项标题\r\n          //       id: 0 // 选项id\r\n          //     },\r\n          //   ],\r\n          //   row: 1, // 填空区域行数\r\n          //   refer: '', // 参考答案\r\n          //   point: 0,  // 分值\r\n          // },\r\n          // {\r\n          //   id: 4,\r\n          //   type: 'school',\r\n          //   title: '学校',\r\n          //   must: true, // 是否必填\r\n          //   description: '', // 问题描述\r\n          //   options: [\r\n          //     {\r\n          //       title: '', // 选项标题\r\n          //       id: 0 // 选项id\r\n          //     },\r\n          //   ],\r\n          //   row: 1, // 填空区域行数\r\n          //   refer: '', // 参考答案\r\n          //   point: 0,  // 分值\r\n          // },\r\n          // {\r\n          //   id: 5,\r\n          //   type: 'radio',\r\n          //   title: '这是一个什么问卷？',\r\n          //   must: true, // 是否必填\r\n          //   description: '请谨慎做答', // 问题描述\r\n          //   options: [\r\n          //     {\r\n          //       title: '考试问卷', // 选项标题\r\n          //       id: 1 // 选项id\r\n          //     },\r\n          //     {\r\n          //       title: '调查问卷', // 选项标题\r\n          //       id: 2 // 选项id\r\n          //     },\r\n          //   ],\r\n          //   row: 0, // 填空区域行数\r\n          //   refer: '考试问卷', // 参考答案\r\n          //   point: 10,  // 分值\r\n          // },\r\n          // {\r\n          //   id: 6,\r\n          //   type: 'checkbox',\r\n          //   title: '软工助教都有谁？',\r\n          //   must: false, // 是否必填\r\n          //   description: '', // 问题描述\r\n          //   options: [\r\n          //     {\r\n          //       title: 'ZYH', // 选项标题\r\n          //       id: 1 // 选项id\r\n          //     },\r\n          //     {\r\n          //       title: 'LKW', // 选项标题\r\n          //       id: 2 // 选项id\r\n          //     },\r\n          //     {\r\n          //       title: 'MHY', // 选项标题\r\n          //       id: 3 // 选项id\r\n          //     },\r\n          //     {\r\n          //       title: 'HZH', // 选项标题\r\n          //       id: 4 // 选项id\r\n          //     },\r\n          //   ],\r\n          //   row: 0, // 填空区域行数\r\n          //   refer: '[\"LKW\", \"MHY\"]', // 参考答案\r\n          //   point: 10,  // 分值\r\n          // },\r\n          // {\r\n          //   id: 7,\r\n          //   type: 'text',\r\n          //   title: '小学期累不累？',\r\n          //   must: false, // 是否必填\r\n          //   description: '请谨慎考虑做答', // 问题描述\r\n          //   options: [\r\n          //     {\r\n          //       title: '', // 选项标题\r\n          //       id: 0 // 选项id\r\n          //     },\r\n          //   ],\r\n          //   row: 5, // 填空区域行数\r\n          //   refer: '', // 参考答案\r\n          //   point: 30,  // 分值\r\n          // },\r\n          // {\r\n          //   id: 8,\r\n          //   type: 'judge',\r\n          //   title: '从来没有加过班',\r\n          //   must: true, // 是否必填\r\n          //   description: '请谨慎考虑做答', // 问题描述\r\n          //   options: [\r\n          //     {\r\n          //       title: '对', // 选项标题\r\n          //       id: 1 // 选项id\r\n          //     },\r\n          //     {\r\n          //       title: '错', // 选项标题\r\n          //       id: 2 // 选项id\r\n          //     },\r\n          //   ],\r\n          //   row: 0, // 填空区域行数\r\n          //   refer: '对', // 参考答案\r\n          //   point: 50,  // 分值\r\n          // },\r\n        ],\r\n        answers: [\r\n          // {\r\n          //   question_id: '1',\r\n          //   type: 'name',\r\n          //   ans: null,\r\n          //   ansList: [],\r\n          //   answer: ''\r\n          // },\r\n          // {\r\n          //   question_id: '2',\r\n          //   type: 'stuId',\r\n          //   ans: null,\r\n          //   ansList: [],\r\n          //   answer: ''\r\n          // },\r\n          // {\r\n          //   question_id: '3',\r\n          //   type: 'class',\r\n          //   ans: null,\r\n          //   ansList: [],\r\n          //   answer: ''\r\n          // },\r\n          // {\r\n          //   question_id: '4',\r\n          //   type: 'school',\r\n          //   ans: null,\r\n          //   ansList: [],\r\n          //   answer: ''\r\n          // },\r\n          // {\r\n          //   question_id: '5',\r\n          //   type: 'radio',\r\n          //   ans: null,\r\n          //   ansList: [],\r\n          //   answer: ''\r\n          // },\r\n          // {\r\n          //   question_id: '6',\r\n          //   type: 'checkbox',\r\n          //   ans: null,\r\n          //   ansList: [],\r\n          //   answer: ''\r\n          // },\r\n          // {\r\n          //   question_id: '7',\r\n          //   type: 'text',\r\n          //   ans: null,\r\n          //   ansList: [],\r\n          //   answer: ''\r\n          // },\r\n          // {\r\n          //   question_id: '8',\r\n          //   type: 'judge',\r\n          //   ans: null,\r\n          //   ansList: [],\r\n          //   answer: ''\r\n          // },\r\n        ],\r\n        quesStorage: [],\r\n        type: '',\r\n        finished_time: '',\r\n      }\r\n    },\r\n    methods: {\r\n      ahead(qid){\r\n        if(qid===0) return true;\r\n        for(let i=0;i<this.questions.length;i++){\r\n          if(this.questions[i].id===qid){\r\n            if(this.questions[i].is_shown===true) return this.ahead(this.questions[i].last_question);\r\n            else return false;\r\n          }\r\n        }\r\n        return false;\r\n      },\r\n      changeHandler(id,value) {\r\n        console.log( id+ '改变之后的值是:' + value);\r\n        let pid=0;\r\n        for(let j=0;j<this.questions[id-1].options.length;j++){\r\n          if(value===this.questions[id-1].options[j].title) pid=this.questions[id-1].options[j].id;\r\n        }\r\n        for(let i=id;i<this.questions.length;i++){\r\n          if(this.questions[i].last_question===id&&this.questions[i].last_option===pid){\r\n            this.questions[i].is_shown=true;\r\n          }\r\n          else if(this.questions[i].last_question===id){\r\n            this.questions[i].is_shown=false;\r\n          }\r\n        }\r\n      },\r\n      changeHandler2(id,value){\r\n        console.log( id+ '改变之后的值是:' + value);\r\n        let pid=[];\r\n        let a=0;\r\n        let find=false;\r\n        for(let j=0;j<this.questions[id-1].options.length;j++){\r\n          for(let k=0;k<value.length;k++){\r\n            if(value[k]===this.questions[id-1].options[j].title) {\r\n              pid[a++]=this.questions[id-1].options[j].id;\r\n              break;\r\n            }\r\n          }\r\n        }\r\n        for(let i=id;i<this.questions.length;i++){\r\n          if(this.questions[i].last_question===id){\r\n            for(let k=0;k<pid.length;k++){\r\n              if(this.questions[i].last_option===pid[k]){\r\n                this.questions[i].is_shown=true;\r\n                find=true;\r\n                break;\r\n              }\r\n            }\r\n            if(!find) this.questions[i].is_shown=false;\r\n          }\r\n        }\r\n      },\r\n      gotoHome() {\r\n        this.$router.push('/');\r\n      },\r\n      backToSurvey() {\r\n        this.success = false;\r\n        this.repeat = false;\r\n        this.close = false;\r\n        location.reload();\r\n      },\r\n      submit: function () {\r\n        this.submitAns('2');\r\n      },\r\n      quit: function () {\r\n        this.$confirm('请选择返回问卷编辑页面或问卷中心？', '确认信息', {\r\n          distinguishCancelAndClose: true,\r\n          confirmButtonText: '编辑页面',\r\n          cancelButtonText: '问卷中心'\r\n        })\r\n        .then(() => {\r\n          location.href = this.GLOBAL.baseUrl + \"/edit_test?pid=\" + this.$route.query.pid;\r\n        })\r\n        .catch(action => {\r\n          if (action === 'cancel') {\r\n            this.$router.push('/index');\r\n          }\r\n        });\r\n      },\r\n    },\r\n    created() {\r\n      if (this.mode === '0') {\r\n        this.getQnDataForPreview();\r\n      }\r\n      else if (this.mode === '1') {\r\n        this.getQnDataForFill(false, true, true);\r\n      }\r\n    },\r\n  }\r\n  </script>\r\n  \r\n  <style>\r\n  .tyn-icon {\r\n    margin: 50px ;\r\n    padding-top: 100px;\r\n  }\r\n  .qn-fill {\r\n    background-image: url(\"../../assets/images/preview_bk.png\");\r\n    background-repeat: repeat-y;\r\n    min-height: 800px;\r\n    overflow: hidden;\r\n    background-position:center;\r\n    background-size: 100% auto;\r\n  }\r\n  \r\n  .qn-fill .back-bt {\r\n    position: fixed;\r\n    right: 90px;\r\n    top: 0;\r\n    margin: auto;\r\n  }\r\n  \r\n  .qn-fill .back-bt .el-button {\r\n    border-radius: 0 0 15px 15px;\r\n  }\r\n  \r\n  .qn-fill .paper {\r\n    margin: 120px auto 0;\r\n    width: 900px;\r\n    background-color: #FFFFFF;\r\n    box-shadow: 0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04)\r\n  }\r\n  \r\n  .qn-fill .body {\r\n    margin-left: 80px;\r\n    margin-right: 80px;\r\n  }\r\n  \r\n  .qn-fill .body .title {\r\n    font-size: 28px;\r\n    font-weight: bold;\r\n    padding-bottom: 40px;\r\n    padding-top: 45px;\r\n  }\r\n  \r\n  .qn-fill .body .description {\r\n    text-align: left;\r\n    font-size: 16px;\r\n    color: black;\r\n    line-height: 30px;\r\n    padding-bottom: 20px;\r\n  }\r\n  \r\n  .qn-fill .body .el-divider--horizontal {\r\n    margin: 0;\r\n  }\r\n  \r\n  .qn-fill .body .q-title {\r\n    text-align: left;\r\n    /*border: solid 1px black;*/\r\n    font-size: 16px;\r\n    padding: 40px 10px 10px;\r\n    font-weight: bold;\r\n  }\r\n  \r\n  .qn-fill .body .q-description {\r\n    text-align: left;\r\n    font-size: 14px;\r\n    padding-left: 10px;\r\n    padding-top: 5px;\r\n    padding-bottom: 10px;\r\n    color: #969696;\r\n  }\r\n  \r\n  .qn-fill .body .must {\r\n    font-weight: normal;\r\n    color: crimson;\r\n  }\r\n  \r\n  .qn-fill .body .point {\r\n    font-weight: normal;\r\n    color: #EC9D2D;\r\n  }\r\n  \r\n  .qn-fill .body .q-opt {\r\n    text-align: left;\r\n    /*border: solid 1px black;*/\r\n    font-size: 16px;\r\n    padding: 10px 10px 10px;\r\n  }\r\n  \r\n  .qn-fill .body .el-checkbox {\r\n    padding: 10px 0;\r\n    display: block;\r\n  }\r\n  \r\n  .qn-fill .body .q-opt .el-textarea__inner {\r\n    max-height: 100px;\r\n  }\r\n  \r\n  .qn-fill .body .submit-bt {\r\n    padding-top: 30px;\r\n    padding-bottom: 50px;\r\n  }\r\n  \r\n  .qn-fill .tail {\r\n    padding-top: 25px;\r\n    font-size: 15px;\r\n    color: #b9b9b9;\r\n    border-top: solid 1px #e3e3e3;\r\n    height: 50px;\r\n    margin: 0 30px 130px;\r\n  }\r\n  </style>"],"mappings":";AAyJE,OAAOA,UAAS,MAAO,oCAAoC;AAC3D,OAAOC,UAAS,MAAO,oBAAoB;AAC3C,OAAOC,UAAS,MAAO,qBAAqB;AAC5C,OAAOC,OAAM,MAAO,iBAAiB;AACrC,OAAOC,QAAO,MAAO,yCAAyC;AAC9D,eAAe;EACbC,IAAI,EAAE,QAAQ;EACdC,MAAM,EAAE,CAACL,UAAU,EAAEC,UAAU,EAAEC,OAAO,CAAC;EACzCI,UAAU,EAAE;IAACP,UAAU;IAAEI;EAAQ,CAAC;EAClCI,IAAIA,CAAA,EAAG;IACL,OAAO;MACL;;MAEAC,OAAO,EAAE,KAAK;MACdC,KAAK,EAAE,KAAK;MACZC,MAAM,EAAE,KAAK;MAEbC,KAAK,EAAE,EAAE;MACTC,IAAI,EAAE,IAAI,CAACC,MAAM,CAACC,KAAK,CAACF,IAAI;MAC5BG,IAAI,EAAE,CAAC;MACPC,KAAK,EAAE,UAAU;MACjBC,WAAW,EAAE,aAAa;MAC1BC,SAAS,EAAE;QACT;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MAAA,CACD;MACDC,OAAO,EAAE;QACP;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MAAA,CACD;MACDC,WAAW,EAAE,EAAE;MACfC,IAAI,EAAE,EAAE;MACRC,aAAa,EAAE;IACjB;EACF,CAAC;EACDC,OAAO,EAAE;IACPC,KAAKA,CAACC,GAAG,EAAC;MACR,IAAGA,GAAG,KAAG,CAAC,EAAE,OAAO,IAAI;MACvB,KAAI,IAAIC,CAAC,GAAC,CAAC,EAACA,CAAC,GAAC,IAAI,CAACR,SAAS,CAACS,MAAM,EAACD,CAAC,EAAE,EAAC;QACtC,IAAG,IAAI,CAACR,SAAS,CAACQ,CAAC,CAAC,CAACE,EAAE,KAAGH,GAAG,EAAC;UAC5B,IAAG,IAAI,CAACP,SAAS,CAACQ,CAAC,CAAC,CAACG,QAAQ,KAAG,IAAI,EAAE,OAAO,IAAI,CAACL,KAAK,CAAC,IAAI,CAACN,SAAS,CAACQ,CAAC,CAAC,CAACI,aAAa,CAAC,MACnF,OAAO,KAAK;QACnB;MACF;MACA,OAAO,KAAK;IACd,CAAC;IACDC,aAAaA,CAACH,EAAE,EAACI,KAAK,EAAE;MACtBC,OAAO,CAACC,GAAG,CAAEN,EAAE,GAAE,UAAS,GAAII,KAAK,CAAC;MACpC,IAAIG,GAAG,GAAC,CAAC;MACT,KAAI,IAAIC,CAAC,GAAC,CAAC,EAACA,CAAC,GAAC,IAAI,CAAClB,SAAS,CAACU,EAAE,GAAC,CAAC,CAAC,CAACS,OAAO,CAACV,MAAM,EAACS,CAAC,EAAE,EAAC;QACpD,IAAGJ,KAAK,KAAG,IAAI,CAA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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}