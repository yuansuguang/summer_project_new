{"ast":null,"code":"/**\n * @constructor\n * @alias module:echarts-gl/component/mapbox3D/Mapbox3DLayer\n * @param {string} id Layer ID\n * @param {module:zrender/ZRender} zr\n */\nfunction Mapbox3DLayer(id, zr) {\n  this.id = id;\n  this.zr = zr;\n  this.dom = document.createElement('div');\n  this.dom.style.cssText = 'position:absolute;left:0;right:0;top:0;bottom:0;'; // FIXME If in module environment.\n\n  if (!mapboxgl) {\n    throw new Error('Mapbox GL library must be included. See https://www.mapbox.com/mapbox-gl-js/api/');\n  }\n  this._mapbox = new mapboxgl.Map({\n    container: this.dom\n  }); // Proxy events\n\n  this._initEvents();\n}\nMapbox3DLayer.prototype.setUnpainted = function () {};\nMapbox3DLayer.prototype.resize = function () {\n  this._mapbox.resize();\n};\nMapbox3DLayer.prototype.getMapbox = function () {\n  return this._mapbox;\n};\nMapbox3DLayer.prototype.clear = function () {};\nMapbox3DLayer.prototype.refresh = function () {\n  this._mapbox.resize();\n};\nvar EVENTS = ['mousedown', 'mouseup', 'click', 'dblclick', 'mousemove', 'mousewheel', 'wheel', 'touchstart', 'touchend', 'touchmove', 'touchcancel'];\nMapbox3DLayer.prototype._initEvents = function () {\n  // Event is bound on canvas container.\n  var mapboxRoot = this._mapbox.getCanvasContainer();\n  this._handlers = this._handlers || {\n    contextmenu: function (e) {\n      e.preventDefault();\n      return false;\n    }\n  };\n  EVENTS.forEach(function (eName) {\n    this._handlers[eName] = function (e) {\n      var obj = {};\n      for (var name in e) {\n        obj[name] = e[name];\n      }\n      obj.bubbles = false;\n      var newE = new e.constructor(e.type, obj);\n      mapboxRoot.dispatchEvent(newE);\n    };\n    this.zr.dom.addEventListener(eName, this._handlers[eName]);\n  }, this); // PENDING\n\n  this.zr.dom.addEventListener('contextmenu', this._handlers.contextmenu);\n};\nMapbox3DLayer.prototype.dispose = function () {\n  EVENTS.forEach(function (eName) {\n    this.zr.dom.removeEventListener(eName, this._handlers[eName]);\n  }, this);\n};\nexport default Mapbox3DLayer;","map":{"version":3,"names":["Mapbox3DLayer","id","zr","dom","document","createElement","style","cssText","mapboxgl","Error","_mapbox","Map","container","_initEvents","prototype","setUnpainted","resize","getMapbox","clear","refresh","EVENTS","mapboxRoot","getCanvasContainer","_handlers","contextmenu","e","preventDefault","forEach","eName","obj","name","bubbles","newE","constructor","type","dispatchEvent","addEventListener","dispose","removeEventListener"],"sources":["E:/mytest/node_modules/echarts-gl/lib/component/mapbox3D/Mapbox3DLayer.js"],"sourcesContent":["/**\n * @constructor\n * @alias module:echarts-gl/component/mapbox3D/Mapbox3DLayer\n * @param {string} id Layer ID\n * @param {module:zrender/ZRender} zr\n */\nfunction Mapbox3DLayer(id, zr) {\n  this.id = id;\n  this.zr = zr;\n  this.dom = document.createElement('div');\n  this.dom.style.cssText = 'position:absolute;left:0;right:0;top:0;bottom:0;'; // FIXME If in module environment.\n\n  if (!mapboxgl) {\n    throw new Error('Mapbox GL library must be included. See https://www.mapbox.com/mapbox-gl-js/api/');\n  }\n\n  this._mapbox = new mapboxgl.Map({\n    container: this.dom\n  }); // Proxy events\n\n  this._initEvents();\n}\n\nMapbox3DLayer.prototype.setUnpainted = function () {};\n\nMapbox3DLayer.prototype.resize = function () {\n  this._mapbox.resize();\n};\n\nMapbox3DLayer.prototype.getMapbox = function () {\n  return this._mapbox;\n};\n\nMapbox3DLayer.prototype.clear = function () {};\n\nMapbox3DLayer.prototype.refresh = function () {\n  this._mapbox.resize();\n};\n\nvar EVENTS = ['mousedown', 'mouseup', 'click', 'dblclick', 'mousemove', 'mousewheel', 'wheel', 'touchstart', 'touchend', 'touchmove', 'touchcancel'];\n\nMapbox3DLayer.prototype._initEvents = function () {\n  // Event is bound on canvas container.\n  var mapboxRoot = this._mapbox.getCanvasContainer();\n\n  this._handlers = this._handlers || {\n    contextmenu: function (e) {\n      e.preventDefault();\n      return false;\n    }\n  };\n  EVENTS.forEach(function (eName) {\n    this._handlers[eName] = function (e) {\n      var obj = {};\n\n      for (var name in e) {\n        obj[name] = e[name];\n      }\n\n      obj.bubbles = false;\n      var newE = new e.constructor(e.type, obj);\n      mapboxRoot.dispatchEvent(newE);\n    };\n\n    this.zr.dom.addEventListener(eName, this._handlers[eName]);\n  }, this); // PENDING\n\n  this.zr.dom.addEventListener('contextmenu', this._handlers.contextmenu);\n};\n\nMapbox3DLayer.prototype.dispose = function () {\n  EVENTS.forEach(function (eName) {\n    this.zr.dom.removeEventListener(eName, this._handlers[eName]);\n  }, this);\n};\n\nexport default Mapbox3DLayer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}