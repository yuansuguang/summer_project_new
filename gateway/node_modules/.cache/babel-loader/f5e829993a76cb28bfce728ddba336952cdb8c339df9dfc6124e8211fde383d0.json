{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nfunction Handler(action, context) {\n  this.action = action;\n  this.context = context;\n}\n/**\n * @mixin\n * @alias clay.core.mixin.notifier\n */\nvar notifier = {\n  /**\n   * Trigger event\n   * @param  {string} name\n   */\n  trigger: function (name) {\n    if (!this.hasOwnProperty('__handlers__')) {\n      return;\n    }\n    if (!this.__handlers__.hasOwnProperty(name)) {\n      return;\n    }\n    var hdls = this.__handlers__[name];\n    var l = hdls.length,\n      i = -1,\n      args = arguments;\n    // Optimize advise from backbone\n    switch (args.length) {\n      case 1:\n        while (++i < l) {\n          hdls[i].action.call(hdls[i].context);\n        }\n        return;\n      case 2:\n        while (++i < l) {\n          hdls[i].action.call(hdls[i].context, args[1]);\n        }\n        return;\n      case 3:\n        while (++i < l) {\n          hdls[i].action.call(hdls[i].context, args[1], args[2]);\n        }\n        return;\n      case 4:\n        while (++i < l) {\n          hdls[i].action.call(hdls[i].context, args[1], args[2], args[3]);\n        }\n        return;\n      case 5:\n        while (++i < l) {\n          hdls[i].action.call(hdls[i].context, args[1], args[2], args[3], args[4]);\n        }\n        return;\n      default:\n        while (++i < l) {\n          hdls[i].action.apply(hdls[i].context, Array.prototype.slice.call(args, 1));\n        }\n        return;\n    }\n  },\n  /**\n   * Register event handler\n   * @param  {string} name\n   * @param  {Function} action\n   * @param  {Object} [context]\n   * @chainable\n   */\n  on: function (name, action, context) {\n    if (!name || !action) {\n      return;\n    }\n    var handlers = this.__handlers__ || (this.__handlers__ = {});\n    if (!handlers[name]) {\n      handlers[name] = [];\n    } else {\n      if (this.has(name, action)) {\n        return;\n      }\n    }\n    var handler = new Handler(action, context || this);\n    handlers[name].push(handler);\n    return this;\n  },\n  /**\n   * Register event, event will only be triggered once and then removed\n   * @param  {string} name\n   * @param  {Function} action\n   * @param  {Object} [context]\n   * @chainable\n   */\n  once: function (name, action, context) {\n    if (!name || !action) {\n      return;\n    }\n    var self = this;\n    function wrapper() {\n      self.off(name, wrapper);\n      action.apply(this, arguments);\n    }\n    return this.on(name, wrapper, context);\n  },\n  /**\n   * Alias of once('before' + name)\n   * @param  {string} name\n   * @param  {Function} action\n   * @param  {Object} [context]\n   * @chainable\n   */\n  before: function (name, action, context) {\n    if (!name || !action) {\n      return;\n    }\n    name = 'before' + name;\n    return this.on(name, action, context);\n  },\n  /**\n   * Alias of once('after' + name)\n   * @param  {string} name\n   * @param  {Function} action\n   * @param  {Object} [context]\n   * @chainable\n   */\n  after: function (name, action, context) {\n    if (!name || !action) {\n      return;\n    }\n    name = 'after' + name;\n    return this.on(name, action, context);\n  },\n  /**\n   * Alias of on('success')\n   * @param  {Function} action\n   * @param  {Object} [context]\n   * @chainable\n   */\n  success: function (action, context) {\n    return this.once('success', action, context);\n  },\n  /**\n   * Alias of on('error')\n   * @param  {Function} action\n   * @param  {Object} [context]\n   * @chainable\n   */\n  error: function (action, context) {\n    return this.once('error', action, context);\n  },\n  /**\n   * Remove event listener\n   * @param  {Function} action\n   * @param  {Object} [context]\n   * @chainable\n   */\n  off: function (name, action) {\n    var handlers = this.__handlers__ || (this.__handlers__ = {});\n    if (!action) {\n      handlers[name] = [];\n      return;\n    }\n    if (handlers[name]) {\n      var hdls = handlers[name];\n      var retains = [];\n      for (var i = 0; i < hdls.length; i++) {\n        if (action && hdls[i].action !== action) {\n          retains.push(hdls[i]);\n        }\n      }\n      handlers[name] = retains;\n    }\n    return this;\n  },\n  /**\n   * If registered the event handler\n   * @param  {string}  name\n   * @param  {Function}  action\n   * @return {boolean}\n   */\n  has: function (name, action) {\n    var handlers = this.__handlers__;\n    if (!handlers || !handlers[name]) {\n      return false;\n    }\n    var hdls = handlers[name];\n    for (var i = 0; i < hdls.length; i++) {\n      if (hdls[i].action === action) {\n        return true;\n      }\n    }\n  }\n};\nexport default notifier;","map":{"version":3,"names":["Handler","action","context","notifier","trigger","name","hasOwnProperty","__handlers__","hdls","l","length","i","args","arguments","call","apply","Array","prototype","slice","on","handlers","has","handler","push","once","self","wrapper","off","before","after","success","error","retains"],"sources":["E:/mytest/node_modules/claygl/src/core/mixin/notifier.js"],"sourcesContent":["function Handler(action, context) {\n    this.action = action;\n    this.context = context;\n}\n/**\n * @mixin\n * @alias clay.core.mixin.notifier\n */\nvar notifier = {\n    /**\n     * Trigger event\n     * @param  {string} name\n     */\n    trigger: function(name) {\n        if (!this.hasOwnProperty('__handlers__')) {\n            return;\n        }\n        if (!this.__handlers__.hasOwnProperty(name)) {\n            return;\n        }\n\n        var hdls = this.__handlers__[name];\n        var l = hdls.length, i = -1, args = arguments;\n        // Optimize advise from backbone\n        switch (args.length) {\n            case 1:\n                while (++i < l) {\n                    hdls[i].action.call(hdls[i].context);\n                }\n                return;\n            case 2:\n                while (++i < l) {\n                    hdls[i].action.call(hdls[i].context, args[1]);\n                }\n                return;\n            case 3:\n                while (++i < l) {\n                    hdls[i].action.call(hdls[i].context, args[1], args[2]);\n                }\n                return;\n            case 4:\n                while (++i < l) {\n                    hdls[i].action.call(hdls[i].context, args[1], args[2], args[3]);\n                }\n                return;\n            case 5:\n                while (++i < l) {\n                    hdls[i].action.call(hdls[i].context, args[1], args[2], args[3], args[4]);\n                }\n                return;\n            default:\n                while (++i < l) {\n                    hdls[i].action.apply(hdls[i].context, Array.prototype.slice.call(args, 1));\n                }\n                return;\n        }\n    },\n    /**\n     * Register event handler\n     * @param  {string} name\n     * @param  {Function} action\n     * @param  {Object} [context]\n     * @chainable\n     */\n    on: function(name, action, context) {\n        if (!name || !action) {\n            return;\n        }\n        var handlers = this.__handlers__ || (this.__handlers__={});\n        if (!handlers[name]) {\n            handlers[name] = [];\n        }\n        else {\n            if (this.has(name, action)) {\n                return;\n            }\n        }\n        var handler = new Handler(action, context || this);\n        handlers[name].push(handler);\n\n        return this;\n    },\n\n    /**\n     * Register event, event will only be triggered once and then removed\n     * @param  {string} name\n     * @param  {Function} action\n     * @param  {Object} [context]\n     * @chainable\n     */\n    once: function(name, action, context) {\n        if (!name || !action) {\n            return;\n        }\n        var self = this;\n        function wrapper() {\n            self.off(name, wrapper);\n            action.apply(this, arguments);\n        }\n        return this.on(name, wrapper, context);\n    },\n\n    /**\n     * Alias of once('before' + name)\n     * @param  {string} name\n     * @param  {Function} action\n     * @param  {Object} [context]\n     * @chainable\n     */\n    before: function(name, action, context) {\n        if (!name || !action) {\n            return;\n        }\n        name = 'before' + name;\n        return this.on(name, action, context);\n    },\n\n    /**\n     * Alias of once('after' + name)\n     * @param  {string} name\n     * @param  {Function} action\n     * @param  {Object} [context]\n     * @chainable\n     */\n    after: function(name, action, context) {\n        if (!name || !action) {\n            return;\n        }\n        name = 'after' + name;\n        return this.on(name, action, context);\n    },\n\n    /**\n     * Alias of on('success')\n     * @param  {Function} action\n     * @param  {Object} [context]\n     * @chainable\n     */\n    success: function(action, context) {\n        return this.once('success', action, context);\n    },\n\n    /**\n     * Alias of on('error')\n     * @param  {Function} action\n     * @param  {Object} [context]\n     * @chainable\n     */\n    error: function(action, context) {\n        return this.once('error', action, context);\n    },\n\n    /**\n     * Remove event listener\n     * @param  {Function} action\n     * @param  {Object} [context]\n     * @chainable\n     */\n    off: function(name, action) {\n\n        var handlers = this.__handlers__ || (this.__handlers__={});\n\n        if (!action) {\n            handlers[name] = [];\n            return;\n        }\n        if (handlers[name]) {\n            var hdls = handlers[name];\n            var retains = [];\n            for (var i = 0; i < hdls.length; i++) {\n                if (action && hdls[i].action !== action) {\n                    retains.push(hdls[i]);\n                }\n            }\n            handlers[name] = retains;\n        }\n\n        return this;\n    },\n\n    /**\n     * If registered the event handler\n     * @param  {string}  name\n     * @param  {Function}  action\n     * @return {boolean}\n     */\n    has: function(name, action) {\n        var handlers = this.__handlers__;\n\n        if (! handlers ||\n            ! handlers[name]) {\n            return false;\n        }\n        var hdls = handlers[name];\n        for (var i = 0; i < hdls.length; i++) {\n            if (hdls[i].action === action) {\n                return true;\n            }\n        }\n    }\n};\n\nexport default notifier;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}