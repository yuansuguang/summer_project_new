{"ast":null,"code":"/**\n * @constructor\n * @alias module:echarts-gl/component/maptalks/Maptalks3DLayer\n * @param {string} id Layer ID\n * @param {module:zrender/ZRender} zr\n */\nfunction Maptalks3DLayer(id, zr, defaultCenter, defaultZoom) {\n  this.id = id;\n  this.zr = zr;\n  this.dom = document.createElement('div');\n  this.dom.style.cssText = 'position:absolute;left:0;right:0;top:0;bottom:0;'; // FIXME If in module environment.\n\n  if (!maptalks) {\n    throw new Error('Maptalks library must be included. See https://maptalks.org');\n  }\n  this._maptalks = new maptalks.Map(this.dom, {\n    center: defaultCenter,\n    zoom: defaultZoom,\n    doubleClickZoom: false,\n    fog: false // fogColor: [0, 0, 0]\n  }); // Proxy events\n\n  this._initEvents();\n}\nMaptalks3DLayer.prototype.setUnpainted = function () {};\nMaptalks3DLayer.prototype.resize = function () {\n  this._maptalks.checkSize();\n};\nMaptalks3DLayer.prototype.getMaptalks = function () {\n  return this._maptalks;\n};\nMaptalks3DLayer.prototype.clear = function () {};\nMaptalks3DLayer.prototype.refresh = function () {\n  this._maptalks.checkSize();\n};\nvar EVENTS = ['mousedown', 'mouseup', 'click', 'dblclick', 'mousemove', 'mousewheel', 'DOMMouseScroll', 'touchstart', 'touchend', 'touchmove', 'touchcancel'];\nMaptalks3DLayer.prototype._initEvents = function () {\n  // Event is bound on canvas container.\n  var maptalksRoot = this.dom;\n  this._handlers = this._handlers || {\n    contextmenu: function (e) {\n      e.preventDefault();\n      return false;\n    }\n  };\n  EVENTS.forEach(function (eName) {\n    this._handlers[eName] = function (e) {\n      var obj = {};\n      for (var name in e) {\n        obj[name] = e[name];\n      }\n      obj.bubbles = false;\n      var newE = new e.constructor(e.type, obj);\n      if (eName === 'mousewheel' || eName === 'DOMMouseScroll') {\n        // maptalks listens events to different elements?\n        maptalksRoot.dispatchEvent(newE);\n      } else {\n        maptalksRoot.firstElementChild.dispatchEvent(newE);\n      }\n    };\n    this.zr.dom.addEventListener(eName, this._handlers[eName]);\n  }, this); // PENDING\n\n  this.zr.dom.addEventListener('contextmenu', this._handlers.contextmenu);\n};\nMaptalks3DLayer.prototype.dispose = function () {\n  EVENTS.forEach(function (eName) {\n    this.zr.dom.removeEventListener(eName, this._handlers[eName]);\n  }, this);\n  this._maptalks.remove();\n};\nexport default Maptalks3DLayer;","map":{"version":3,"names":["Maptalks3DLayer","id","zr","defaultCenter","defaultZoom","dom","document","createElement","style","cssText","maptalks","Error","_maptalks","Map","center","zoom","doubleClickZoom","fog","_initEvents","prototype","setUnpainted","resize","checkSize","getMaptalks","clear","refresh","EVENTS","maptalksRoot","_handlers","contextmenu","e","preventDefault","forEach","eName","obj","name","bubbles","newE","constructor","type","dispatchEvent","firstElementChild","addEventListener","dispose","removeEventListener","remove"],"sources":["E:/mytest/node_modules/echarts-gl/lib/component/maptalks3D/Maptalks3DLayer.js"],"sourcesContent":["/**\n * @constructor\n * @alias module:echarts-gl/component/maptalks/Maptalks3DLayer\n * @param {string} id Layer ID\n * @param {module:zrender/ZRender} zr\n */\nfunction Maptalks3DLayer(id, zr, defaultCenter, defaultZoom) {\n  this.id = id;\n  this.zr = zr;\n  this.dom = document.createElement('div');\n  this.dom.style.cssText = 'position:absolute;left:0;right:0;top:0;bottom:0;'; // FIXME If in module environment.\n\n  if (!maptalks) {\n    throw new Error('Maptalks library must be included. See https://maptalks.org');\n  }\n\n  this._maptalks = new maptalks.Map(this.dom, {\n    center: defaultCenter,\n    zoom: defaultZoom,\n    doubleClickZoom: false,\n    fog: false // fogColor: [0, 0, 0]\n\n  }); // Proxy events\n\n  this._initEvents();\n}\n\nMaptalks3DLayer.prototype.setUnpainted = function () {};\n\nMaptalks3DLayer.prototype.resize = function () {\n  this._maptalks.checkSize();\n};\n\nMaptalks3DLayer.prototype.getMaptalks = function () {\n  return this._maptalks;\n};\n\nMaptalks3DLayer.prototype.clear = function () {};\n\nMaptalks3DLayer.prototype.refresh = function () {\n  this._maptalks.checkSize();\n};\n\nvar EVENTS = ['mousedown', 'mouseup', 'click', 'dblclick', 'mousemove', 'mousewheel', 'DOMMouseScroll', 'touchstart', 'touchend', 'touchmove', 'touchcancel'];\n\nMaptalks3DLayer.prototype._initEvents = function () {\n  // Event is bound on canvas container.\n  var maptalksRoot = this.dom;\n  this._handlers = this._handlers || {\n    contextmenu: function (e) {\n      e.preventDefault();\n      return false;\n    }\n  };\n  EVENTS.forEach(function (eName) {\n    this._handlers[eName] = function (e) {\n      var obj = {};\n\n      for (var name in e) {\n        obj[name] = e[name];\n      }\n\n      obj.bubbles = false;\n      var newE = new e.constructor(e.type, obj);\n\n      if (eName === 'mousewheel' || eName === 'DOMMouseScroll') {\n        // maptalks listens events to different elements?\n        maptalksRoot.dispatchEvent(newE);\n      } else {\n        maptalksRoot.firstElementChild.dispatchEvent(newE);\n      }\n    };\n\n    this.zr.dom.addEventListener(eName, this._handlers[eName]);\n  }, this); // PENDING\n\n  this.zr.dom.addEventListener('contextmenu', this._handlers.contextmenu);\n};\n\nMaptalks3DLayer.prototype.dispose = function () {\n  EVENTS.forEach(function (eName) {\n    this.zr.dom.removeEventListener(eName, this._handlers[eName]);\n  }, this);\n\n  this._maptalks.remove();\n};\n\nexport default Maptalks3DLayer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}