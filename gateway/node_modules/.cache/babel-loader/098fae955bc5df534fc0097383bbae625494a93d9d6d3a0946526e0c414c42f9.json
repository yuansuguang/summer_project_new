{"ast":null,"code":"import * as matrix from 'zrender/lib/core/matrix';\nimport * as vector from 'zrender/lib/core/vector';\nfunction GLViewHelper(viewGL) {\n  this.viewGL = viewGL;\n}\nGLViewHelper.prototype.reset = function (seriesModel, api) {\n  this._updateCamera(api.getWidth(), api.getHeight(), api.getDevicePixelRatio());\n  this._viewTransform = matrix.create();\n  this.updateTransform(seriesModel, api);\n};\nGLViewHelper.prototype.updateTransform = function (seriesModel, api) {\n  var coordinateSystem = seriesModel.coordinateSystem;\n  if (coordinateSystem.getRoamTransform) {\n    matrix.invert(this._viewTransform, coordinateSystem.getRoamTransform());\n    this._setCameraTransform(this._viewTransform);\n    api.getZr().refresh();\n  }\n}; // Reimplement the dataToPoint of coordinate system.\n// Remove the effect of pan/zoom transform\n\nGLViewHelper.prototype.dataToPoint = function (coordSys, data, pt) {\n  pt = coordSys.dataToPoint(data, null, pt);\n  var viewTransform = this._viewTransform;\n  if (viewTransform) {\n    vector.applyTransform(pt, pt, viewTransform);\n  }\n};\n/**\n * Remove transform info in point.\n */\n\nGLViewHelper.prototype.removeTransformInPoint = function (pt) {\n  if (this._viewTransform) {\n    vector.applyTransform(pt, pt, this._viewTransform);\n  }\n  return pt;\n};\n/**\n * Return number\n */\n\nGLViewHelper.prototype.getZoom = function () {\n  if (this._viewTransform) {\n    var m = this._viewTransform;\n    return 1 / Math.max(Math.sqrt(m[0] * m[0] + m[1] * m[1]), Math.sqrt(m[2] * m[2] + m[3] * m[3]));\n  }\n  return 1;\n};\nGLViewHelper.prototype._setCameraTransform = function (m) {\n  var camera = this.viewGL.camera;\n  camera.position.set(m[4], m[5], 0);\n  camera.scale.set(Math.sqrt(m[0] * m[0] + m[1] * m[1]), Math.sqrt(m[2] * m[2] + m[3] * m[3]), 1);\n};\nGLViewHelper.prototype._updateCamera = function (width, height, dpr) {\n  // TODO, left, top, right, bottom\n  this.viewGL.setViewport(0, 0, width, height, dpr);\n  var camera = this.viewGL.camera;\n  camera.left = camera.top = 0;\n  camera.bottom = height;\n  camera.right = width;\n  camera.near = 0;\n  camera.far = 100;\n};\nexport default GLViewHelper;","map":{"version":3,"names":["matrix","vector","GLViewHelper","viewGL","prototype","reset","seriesModel","api","_updateCamera","getWidth","getHeight","getDevicePixelRatio","_viewTransform","create","updateTransform","coordinateSystem","getRoamTransform","invert","_setCameraTransform","getZr","refresh","dataToPoint","coordSys","data","pt","viewTransform","applyTransform","removeTransformInPoint","getZoom","m","Math","max","sqrt","camera","position","set","scale","width","height","dpr","setViewport","left","top","bottom","right","near","far"],"sources":["E:/QuestionairePlanet_Fronted/mytest/node_modules/echarts-gl/lib/chart/common/GLViewHelper.js"],"sourcesContent":["import * as matrix from 'zrender/lib/core/matrix';\nimport * as vector from 'zrender/lib/core/vector';\n\nfunction GLViewHelper(viewGL) {\n  this.viewGL = viewGL;\n}\n\nGLViewHelper.prototype.reset = function (seriesModel, api) {\n  this._updateCamera(api.getWidth(), api.getHeight(), api.getDevicePixelRatio());\n\n  this._viewTransform = matrix.create();\n  this.updateTransform(seriesModel, api);\n};\n\nGLViewHelper.prototype.updateTransform = function (seriesModel, api) {\n  var coordinateSystem = seriesModel.coordinateSystem;\n\n  if (coordinateSystem.getRoamTransform) {\n    matrix.invert(this._viewTransform, coordinateSystem.getRoamTransform());\n\n    this._setCameraTransform(this._viewTransform);\n\n    api.getZr().refresh();\n  }\n}; // Reimplement the dataToPoint of coordinate system.\n// Remove the effect of pan/zoom transform\n\n\nGLViewHelper.prototype.dataToPoint = function (coordSys, data, pt) {\n  pt = coordSys.dataToPoint(data, null, pt);\n  var viewTransform = this._viewTransform;\n\n  if (viewTransform) {\n    vector.applyTransform(pt, pt, viewTransform);\n  }\n};\n/**\n * Remove transform info in point.\n */\n\n\nGLViewHelper.prototype.removeTransformInPoint = function (pt) {\n  if (this._viewTransform) {\n    vector.applyTransform(pt, pt, this._viewTransform);\n  }\n\n  return pt;\n};\n/**\n * Return number\n */\n\n\nGLViewHelper.prototype.getZoom = function () {\n  if (this._viewTransform) {\n    var m = this._viewTransform;\n    return 1 / Math.max(Math.sqrt(m[0] * m[0] + m[1] * m[1]), Math.sqrt(m[2] * m[2] + m[3] * m[3]));\n  }\n\n  return 1;\n};\n\nGLViewHelper.prototype._setCameraTransform = function (m) {\n  var camera = this.viewGL.camera;\n  camera.position.set(m[4], m[5], 0);\n  camera.scale.set(Math.sqrt(m[0] * m[0] + m[1] * m[1]), Math.sqrt(m[2] * m[2] + m[3] * m[3]), 1);\n};\n\nGLViewHelper.prototype._updateCamera = function (width, height, dpr) {\n  // TODO, left, top, right, bottom\n  this.viewGL.setViewport(0, 0, width, height, dpr);\n  var camera = this.viewGL.camera;\n  camera.left = camera.top = 0;\n  camera.bottom = height;\n  camera.right = width;\n  camera.near = 0;\n  camera.far = 100;\n};\n\nexport default GLViewHelper;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}